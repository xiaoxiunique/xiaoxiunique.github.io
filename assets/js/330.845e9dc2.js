(window.webpackJsonp=window.webpackJsonp||[]).push([[330],{1010:function(s,t,e){"use strict";e.r(t);var a=e(20),n=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h3",{attrs:{id:"docker-安装-mysql"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装-mysql"}},[s._v("#")]),s._v(" Docker 安装 MYSQL")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("docker pull mysql:5.7.25")])]),s._v(" "),e("li",[e("p",[s._v("创建同步数据文件夹 mkdir -p /data/mysql")])]),s._v(" "),e("li",[e("p",[s._v("启动容器")]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker stop mysql "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" docker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" mysql"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" docker run --name mysql -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v(":3306 -v /data/mysql:/var/lib/mysql -e "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_ROOT_PASSWORD")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("xgimi123"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(" -d mysql:5.7.25 --character-set-server"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8mb4 --collation-server"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8mb4_unicode_ci\n")])])])])]),s._v(" "),e("h3",{attrs:{id:"docker-安装-jenkins"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装-jenkins"}},[s._v("#")]),s._v(" Docker 安装 Jenkins")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("docker pull jenkins/jenkins:lts")])]),s._v(" "),e("li",[e("p",[s._v("创建 Jenkins 数据文件夹 "),e("code",[s._v("mkdir -p /www/jenkins_home")])])]),s._v(" "),e("li",[e("p",[s._v("修改文件夹权限 "),e("code",[s._v("chmod 777 /www/jenkins_home")])])]),s._v(" "),e("li",[e("p",[s._v("中国镜像 DockerFile")]),s._v(" "),e("div",{staticClass:"language-dockerfile extra-class"},[e("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" jenkins/jenkins"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("lts\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" JENKINS_UC https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//updates.jenkins"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("zh.cn\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" JENKINS_UC_DOWNLOAD https"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//mirrors.tuna.tsinghua.edu.cn/jenkins\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" JENKINS_OPTS="),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-Dhudson.model.UpdateCenter.updateCenterUrl=https://updates.jenkins-zh.cn/update-center.json"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" JENKINS_OPTS="),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-Djenkins.install.runSetupWizard=false"')]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" init.groovy /usr/share/jenkins/ref/init.groovy.d/init.groovy\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" hudson.model.UpdateCenter.xml /usr/share/jenkins/ref/hudson.model.UpdateCenter.xml\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COPY")]),s._v(" mirror"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("adapter.crt /usr/share/jenkins/ref/mirror"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("adapter.crt\n")])])])]),s._v(" "),e("li",[e("p",[s._v("启动容器")])])]),s._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker stop jenkins"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" docker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" jenkins"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" docker run -d -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("18080")]),s._v(":8080 -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("50000")]),s._v(":50000 --restart"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always --privileged"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true -v /www/jenkins_home:/var/jenkins_home -v /var/run/docker.sock:/var/run/docker.sock -v "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" docker"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" docker"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" --name jenkins b6b6cd\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);