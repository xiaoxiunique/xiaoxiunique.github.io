<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="442px" preserveAspectRatio="none" style="width:513px;height:442px;" version="1.1" viewBox="0 0 513 442" width="513px" zoomAndPan="magnify"><defs><filter height="300%" id="f1pgpq4ogv8ll0" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="29" x2="29" y1="41.1201" y2="398.9097"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="142" x2="142" y1="41.1201" y2="398.9097"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="405" x2="405" y1="41.1201" y2="398.9097"/><rect fill="#FEFECE" filter="url(#f1pgpq4ogv8ll0)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="39" x="8" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="25" x="15" y="26.0439">App</text><rect fill="#FEFECE" filter="url(#f1pgpq4ogv8ll0)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="39" x="8" y="397.9097"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="25" x="15" y="420.9536">App</text><rect fill="#FEFECE" filter="url(#f1pgpq4ogv8ll0)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="96" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="103" y="26.0439">background</text><rect fill="#FEFECE" filter="url(#f1pgpq4ogv8ll0)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="96" y="397.9097"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="103" y="420.9536">background</text><rect fill="#FEFECE" filter="url(#f1pgpq4ogv8ll0)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="37" x="385" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="23" x="392" y="26.0439">Car</text><rect fill="#FEFECE" filter="url(#f1pgpq4ogv8ll0)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="37" x="385" y="397.9097"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="23" x="392" y="420.9536">Car</text><polygon fill="#A80036" points="130.5,70.8745,140.5,74.8745,130.5,78.8745,134.5,74.8745" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="29.5" x2="136.5" y1="74.8745" y2="74.8745"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="36.5" y="70.0181">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="47.5" y="70.0181">发起诊断请求</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="142.5" x2="184.5" y1="106.6289" y2="106.6289"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="184.5" x2="184.5" y1="106.6289" y2="119.6289"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="143.5" x2="184.5" y1="119.6289" y2="119.6289"/><polygon fill="#A80036" points="153.5,115.6289,143.5,119.6289,153.5,123.6289,149.5,119.6289" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="149.5" y="101.7725">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="160.5" y="101.7725">车主授权是否关闭</text><polygon fill="#A80036" points="40.5,147.3833,30.5,151.3833,40.5,155.3833,36.5,151.3833" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="34.5" x2="141.5" y1="151.3833" y2="151.3833"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="46.5" y="146.5269">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="57.5" y="146.5269">授权关闭</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="142.5" x2="184.5" y1="183.1377" y2="183.1377"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="184.5" x2="184.5" y1="183.1377" y2="196.1377"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="143.5" x2="184.5" y1="196.1377" y2="196.1377"/><polygon fill="#A80036" points="153.5,192.1377,143.5,196.1377,153.5,200.1377,149.5,196.1377" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="149.5" y="178.2813">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="160.5" y="178.2813">是否正在请求，或已经得到授权,或被拒绝</text><polygon fill="#A80036" points="40.5,223.8921,30.5,227.8921,40.5,231.8921,36.5,227.8921" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="34.5" x2="141.5" y1="227.8921" y2="227.8921"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="46.5" y="223.0356">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="57.5" y="223.0356">授权关闭</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="142.5" x2="184.5" y1="259.6465" y2="259.6465"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="184.5" x2="184.5" y1="259.6465" y2="272.6465"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="143.5" x2="184.5" y1="272.6465" y2="272.6465"/><polygon fill="#A80036" points="153.5,268.6465,143.5,272.6465,153.5,276.6465,149.5,272.6465" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="149.5" y="254.79">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="160.5" y="254.79">生成授权记录</text><polygon fill="#A80036" points="393.5,300.4009,403.5,304.4009,393.5,308.4009,397.5,304.4009" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="142.5" x2="399.5" y1="304.4009" y2="304.4009"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="149.5" y="299.5444">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="118" x="160.5" y="299.5444">websocket 推送消息</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="405.5" x2="447.5" y1="336.1553" y2="336.1553"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="447.5" x2="447.5" y1="336.1553" y2="349.1553"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="406.5" x2="447.5" y1="349.1553" y2="349.1553"/><polygon fill="#A80036" points="416.5,345.1553,406.5,349.1553,416.5,353.1553,412.5,349.1553" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="412.5" y="331.2988">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="423.5" y="331.2988">处理推送请求</text><polygon fill="#A80036" points="153.5,376.9097,143.5,380.9097,153.5,384.9097,149.5,380.9097" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="147.5" x2="404.5" y1="380.9097" y2="380.9097"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="7" x="159.5" y="376.0532">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="170.5" y="376.0532">返回处理结果</text><!--MD5=[c6f60d49219adb85b7b5c702e741f698]
@startuml
autonumber
participant App
App -> background: 发起诊断请求
background - -> background: 车主授权是否关闭
background - -> App: 授权关闭

background - -> background: 是否正在请求，或已经得到授权,或被拒绝
background - -> App: 授权关闭

background - -> background: 生成授权记录

background -> Car: websocket 推送消息
Car - -> Car: 处理推送请求

Car - -> background: 返回处理结果
@enduml

PlantUML version 1.2020.10(Sun May 17 17:35:57 CST 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Client VM
Java Version: 1.8.0_91-b14
Operating System: Windows 10
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>